<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>idict.core.frozenidentifieddict API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>idict.core.frozenidentifieddict</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">#  Copyright (c) 2021. Davi Pereira dos Santos
#  This file is part of the idict project.
#  Please respect the license - more about this in the section (*) below.
#
#  idict is free software: you can redistribute it and/or modify
#  it under the terms of the GNU General Public License as published by
#  the Free Software Foundation, either version 3 of the License, or
#  (at your option) any later version.
#
#  idict is distributed in the hope that it will be useful,
#  but WITHOUT ANY WARRANTY; without even the implied warranty of
#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#  GNU General Public License for more details.
#
#  You should have received a copy of the GNU General Public License
#  along with idict.  If not, see &lt;http://www.gnu.org/licenses/&gt;.
#
#  (*) Removing authorship by any means, e.g. by distribution of derived
#  works or verbatim, obfuscated, compiled or rewritten versions of any
#  part of this work is illegal and unethical regarding the effort and
#  time spent here.
#
import operator
from functools import reduce
from operator import rshift as aop
from operator import xor as cop
from random import Random
from typing import TypeVar, Union, Callable

from garoupa import Ã¸40, Hosh

from ldict.core.appearance import decolorize
from ldict.core.base import AbstractLazyDict, AbstractMutableLazyDict
from ldict.customjson import CustomJSONEncoder
from ldict.frozenlazydict import FrozenLazyDict

from idict.config import GLOBAL
from idict.core.appearance import idict2txt
from idict.core.identification import key2id, blobs_hashes_hoshes
from idict.parameter.ifunctionspace import iFunctionSpace, reduce3
from idict.parameter.ilet import iLet
from idict.persistence.cached import cached

VT = TypeVar(&#34;VT&#34;)


class FrozenIdentifiedDict(AbstractLazyDict):
    &#34;&#34;&#34;Immutable lazy universally identified dict for serializable (picklable) pairs str-&gt;value

    Usage:

    &gt;&gt;&gt; idict = FrozenIdentifiedDict
    &gt;&gt;&gt; idict().show(colored=False)
    {
        &#34;_id&#34;: &#34;0000000000000000000000000000000000000000&#34;,
        &#34;_ids&#34;: {}
    }
    &gt;&gt;&gt; d = idict(x=5, y=3)
    &gt;&gt;&gt; d.show(colored=False)
    {
        &#34;x&#34;: 5,
        &#34;y&#34;: 3,
        &#34;_id&#34;: &#34;Gm_5a27861eacedc78bf5dc236c663f77f39933b&#34;,
        &#34;_ids&#34;: {
            &#34;x&#34;: &#34;hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f (content: Mj_3bcd9aefb5020343384ae8ccb88fbd872cd8f)&#34;,
            &#34;y&#34;: &#34;o4_fcbb3f8a5c5a37c5cd8260aabdafb9b65d5ab (content: S5_331b7e710abd1443cd82d6b5cdafb9f04d5ab)&#34;
        }
    }
    &gt;&gt;&gt; d[&#34;y&#34;]
    3
    &gt;&gt;&gt; idict(y=88, x=123123).show(colored=False)
    {
        &#34;y&#34;: 88,
        &#34;x&#34;: 123123,
        &#34;_id&#34;: &#34;S-_6a05b897eed2728ea8200aa3f9e90651e952a&#34;,
        &#34;_ids&#34;: {
            &#34;y&#34;: &#34;EV_f4049757e5085edc56b4262974be71951792a (content: 6X_ceb4a9cfad6b3b5a56b49c3484be71dff692a)&#34;,
            &#34;x&#34;: &#34;d5_fa01214009ca14a1527bd38a753b84cbc2cff (content: I6_bcc6fa41b424962f427be985853b8416b2cff)&#34;
        }
    }
    &gt;&gt;&gt; d = idict(x=123123, y=88)
    &gt;&gt;&gt; d2 = d &gt;&gt; (lambda x: {&#34;z&#34;: x**2})
    &gt;&gt;&gt; d2.hosh == d2.identity * d2.ids[&#34;z&#34;] * d2.ids[&#34;x&#34;] * d2.ids[&#34;y&#34;]
    True
    &gt;&gt;&gt; e = d2 &gt;&gt; (lambda x,y: {&#34;w&#34;: x/y})
    &gt;&gt;&gt; e.show(colored=False)
    {
        &#34;w&#34;: &#34;â†’(x y)&#34;,
        &#34;z&#34;: &#34;â†’(x)&#34;,
        &#34;x&#34;: 123123,
        &#34;y&#34;: 88,
        &#34;_id&#34;: &#34;jWguT1MkE.y2lbZAetjGw2tmoFRZsuLzkF84sOwe&#34;,
        &#34;_ids&#34;: {
            &#34;w&#34;: &#34;rl51vcB3tJbMS6y7RQHwJ1c51F.fTbFo4RK7M5M5&#34;,
            &#34;z&#34;: &#34;FI8-Sco6sGMjxpkIQ8-uTHfhAKZJBi6bgQpYHIM8&#34;,
            &#34;x&#34;: &#34;d5_fa01214009ca14a1527bd38a753b84cbc2cff (content: I6_bcc6fa41b424962f427be985853b8416b2cff)&#34;,
            &#34;y&#34;: &#34;EV_f4049757e5085edc56b4262974be71951792a (content: 6X_ceb4a9cfad6b3b5a56b49c3484be71dff692a)&#34;
        }
    }
    &gt;&gt;&gt; a = d &gt;&gt; (lambda x: {&#34;z&#34;: x**2}) &gt;&gt; (lambda x, y: {&#34;w&#34;: x/y})
    &gt;&gt;&gt; b = d &gt;&gt; (lambda x, y: {&#34;w&#34;: x/y}) &gt;&gt; (lambda x: {&#34;z&#34;: x**2})
    &gt;&gt;&gt; dic = d.asdict  # Converting to dict
    &gt;&gt;&gt; dic
    {&#39;x&#39;: 123123, &#39;y&#39;: 88, &#39;_id&#39;: &#39;S-_6a05b897eed2728ea8200aa3f9e90651e952a&#39;, &#39;_ids&#39;: {&#39;x&#39;: &#39;d5_fa01214009ca14a1527bd38a753b84cbc2cff&#39;, &#39;y&#39;: &#39;EV_f4049757e5085edc56b4262974be71951792a&#39;}}
    &gt;&gt;&gt; d2 = idict(dic)  # Reconstructing from a dict
    &gt;&gt;&gt; d2.show(colored=False)
    {
        &#34;x&#34;: 123123,
        &#34;y&#34;: 88,
        &#34;_id&#34;: &#34;S-_6a05b897eed2728ea8200aa3f9e90651e952a&#34;,
        &#34;_ids&#34;: {
            &#34;x&#34;: &#34;d5_fa01214009ca14a1527bd38a753b84cbc2cff&#34;,
            &#34;y&#34;: &#34;EV_f4049757e5085edc56b4262974be71951792a&#34;
        }
    }
    &gt;&gt;&gt; d == d2
    True
    &gt;&gt;&gt; from idict import Ã˜, setup
    &gt;&gt;&gt; d = idict() &gt;&gt; {&#34;x&#34;: &#34;more content&#34;}
    &gt;&gt;&gt; d.show(colored=False)
    {
        &#34;x&#34;: &#34;more content&#34;,
        &#34;_id&#34;: &#34;aF_64eaced14bf0114a6b9eceaac31744c2093df&#34;,
        &#34;_ids&#34;: {
            &#34;x&#34;: &#34;aF_64eaced14bf0114a6b9eceaac31744c2093df&#34;
        }
    }
    &gt;&gt;&gt; f = lambda x,y: {&#34;z&#34;:x+y}
    &gt;&gt;&gt; d = idict(x=5, y=7)
    &gt;&gt;&gt; d2 = d &gt;&gt; f
    &gt;&gt;&gt; d2.show(colored=False)
    {
        &#34;z&#34;: &#34;â†’(x y)&#34;,
        &#34;x&#34;: 5,
        &#34;y&#34;: 7,
        &#34;_id&#34;: &#34;GNYCBw8fGAYow5Ml4xadiKc3TxKm.mdn2sxVEnRv&#34;,
        &#34;_ids&#34;: {
            &#34;z&#34;: &#34;pgVTwHntCH.mN6xVFQ0NIDD72QAm.mdn2sxVEnRv&#34;,
            &#34;x&#34;: &#34;hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f (content: Mj_3bcd9aefb5020343384ae8ccb88fbd872cd8f)&#34;,
            &#34;y&#34;: &#34;Bk_b75c77bb5e2640ad6428eb35f82a492dd8065 (content: 3m_131910d18a892d1b64285250092a4967c8065)&#34;
        }
    }
    &gt;&gt;&gt; c = {}
    &gt;&gt;&gt; d3 = d2 &gt;&gt; [c]
    &gt;&gt;&gt; d3.show(colored=False)
    {
        &#34;z&#34;: &#34;â†’(^ x y)&#34;,
        &#34;x&#34;: 5,
        &#34;y&#34;: 7,
        &#34;_id&#34;: &#34;GNYCBw8fGAYow5Ml4xadiKc3TxKm.mdn2sxVEnRv&#34;,
        &#34;_ids&#34;: {
            &#34;z&#34;: &#34;pgVTwHntCH.mN6xVFQ0NIDD72QAm.mdn2sxVEnRv&#34;,
            &#34;x&#34;: &#34;hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f (content: Mj_3bcd9aefb5020343384ae8ccb88fbd872cd8f)&#34;,
            &#34;y&#34;: &#34;Bk_b75c77bb5e2640ad6428eb35f82a492dd8065 (content: 3m_131910d18a892d1b64285250092a4967c8065)&#34;
        }
    }
    &gt;&gt;&gt; c
    {}
    &gt;&gt;&gt; d3.z
    12
    &gt;&gt;&gt; c
    {&#39;pgVTwHntCH.mN6xVFQ0NIDD72QAm.mdn2sxVEnRv&#39;: 12, &#39;hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f&#39;: 5, &#39;Bk_b75c77bb5e2640ad6428eb35f82a492dd8065&#39;: 7, &#39;GNYCBw8fGAYow5Ml4xadiKc3TxKm.mdn2sxVEnRv&#39;: {&#39;_id&#39;: &#39;GNYCBw8fGAYow5Ml4xadiKc3TxKm.mdn2sxVEnRv&#39;, &#39;_ids&#39;: {&#39;z&#39;: &#39;pgVTwHntCH.mN6xVFQ0NIDD72QAm.mdn2sxVEnRv&#39;, &#39;x&#39;: &#39;hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f&#39;, &#39;y&#39;: &#39;Bk_b75c77bb5e2640ad6428eb35f82a492dd8065&#39;}}}
    &gt;&gt;&gt; d3.show(colored=False)
    {
        &#34;z&#34;: 12,
        &#34;x&#34;: 5,
        &#34;y&#34;: 7,
        &#34;_id&#34;: &#34;GNYCBw8fGAYow5Ml4xadiKc3TxKm.mdn2sxVEnRv&#34;,
        &#34;_ids&#34;: {
            &#34;z&#34;: &#34;pgVTwHntCH.mN6xVFQ0NIDD72QAm.mdn2sxVEnRv&#34;,
            &#34;x&#34;: &#34;hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f (content: Mj_3bcd9aefb5020343384ae8ccb88fbd872cd8f)&#34;,
            &#34;y&#34;: &#34;Bk_b75c77bb5e2640ad6428eb35f82a492dd8065 (content: 3m_131910d18a892d1b64285250092a4967c8065)&#34;
        }
    }
    &gt;&gt;&gt; c = {}
    &gt;&gt;&gt; setup(cache=c)
    &gt;&gt;&gt; d3 = d &gt;&gt; f ^ Ã˜
    &gt;&gt;&gt; d3.show(colored=False)
    {
        &#34;z&#34;: &#34;â†’(^ x y)&#34;,
        &#34;x&#34;: 5,
        &#34;y&#34;: 7,
        &#34;_id&#34;: &#34;GNYCBw8fGAYow5Ml4xadiKc3TxKm.mdn2sxVEnRv&#34;,
        &#34;_ids&#34;: {
            &#34;z&#34;: &#34;pgVTwHntCH.mN6xVFQ0NIDD72QAm.mdn2sxVEnRv&#34;,
            &#34;x&#34;: &#34;hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f (content: Mj_3bcd9aefb5020343384ae8ccb88fbd872cd8f)&#34;,
            &#34;y&#34;: &#34;Bk_b75c77bb5e2640ad6428eb35f82a492dd8065 (content: 3m_131910d18a892d1b64285250092a4967c8065)&#34;
        }
    }
    &gt;&gt;&gt; c
    {}
    &gt;&gt;&gt; d3.z
    12
    &gt;&gt;&gt; c
    {&#39;pgVTwHntCH.mN6xVFQ0NIDD72QAm.mdn2sxVEnRv&#39;: 12, &#39;hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f&#39;: 5, &#39;Bk_b75c77bb5e2640ad6428eb35f82a492dd8065&#39;: 7, &#39;GNYCBw8fGAYow5Ml4xadiKc3TxKm.mdn2sxVEnRv&#39;: {&#39;_id&#39;: &#39;GNYCBw8fGAYow5Ml4xadiKc3TxKm.mdn2sxVEnRv&#39;, &#39;_ids&#39;: {&#39;z&#39;: &#39;pgVTwHntCH.mN6xVFQ0NIDD72QAm.mdn2sxVEnRv&#39;, &#39;x&#39;: &#39;hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f&#39;, &#39;y&#39;: &#39;Bk_b75c77bb5e2640ad6428eb35f82a492dd8065&#39;}}}
    &gt;&gt;&gt; d3.show(colored=False)
    {
        &#34;z&#34;: 12,
        &#34;x&#34;: 5,
        &#34;y&#34;: 7,
        &#34;_id&#34;: &#34;GNYCBw8fGAYow5Ml4xadiKc3TxKm.mdn2sxVEnRv&#34;,
        &#34;_ids&#34;: {
            &#34;z&#34;: &#34;pgVTwHntCH.mN6xVFQ0NIDD72QAm.mdn2sxVEnRv&#34;,
            &#34;x&#34;: &#34;hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f (content: Mj_3bcd9aefb5020343384ae8ccb88fbd872cd8f)&#34;,
            &#34;y&#34;: &#34;Bk_b75c77bb5e2640ad6428eb35f82a492dd8065 (content: 3m_131910d18a892d1b64285250092a4967c8065)&#34;
        }
    }
    &#34;&#34;&#34;

    hosh: Hosh

    # noinspection PyMissingConstructor
    def __init__(self, /, _dictionary=None, _id=None, _ids=None, rnd=None, identity=Ã¸40, _cloned=None, **kwargs):
        self.rnd = rnd
        self.identity = identity
        data = _dictionary or {}
        data.update(kwargs)

        # Freeze mutable *dicts.
        for k, v in data.items():
            if isinstance(v, AbstractMutableLazyDict):
                data[k] = v.frozen

        if _cloned:
            self.blobs = _cloned[&#34;blobs&#34;]
            self.hashes = _cloned[&#34;hashes&#34;]
            self.hoshes = _cloned[&#34;hoshes&#34;]
            self.hosh = _cloned[&#34;hosh&#34;]
        else:
            if &#34;_id&#34; in data:
                if _id:  # pragma: no cover
                    raise Exception(f&#34;Conflicting &#39;id&#39; values: {_id} and {data[&#39;_id&#39;]}&#34;)
                _id = data.pop(&#34;_id&#34;)
            if &#34;_ids&#34; in data:
                if _ids:  # pragma: no cover
                    raise Exception(f&#34;Conflicting &#39;ids&#39; values: {_ids} and {data[&#39;_ids&#39;]}&#34;)
                _ids = data.pop(&#34;_ids&#34;)

            if _id:
                if _ids is None:  # pragma: no cover
                    raise Exception(f&#34;&#39;id&#39; {_id} given, but &#39;ids&#39; is missing.&#34;)
                self.blobs = {}
                self.hashes = {}
                self.hoshes = {k: identity * v for k, v in _ids.items()}
            else:
                self.blobs, self.hashes, self.hoshes = blobs_hashes_hoshes(
                    data, identity, _ids or {}, self.identity.version
                ).values()
            self.hosh = reduce(operator.mul, [identity] + [v for k, v in self.hoshes.items() if not k.startswith(&#34;_&#34;)])

        if _id is None:
            _id = self.hosh.id
            try:
                _ids = {k: v.id for k, v in self.hoshes.items()}
            except:  # pragma: no cover
                print(self.hoshes)
                raise Exception()

        # Store as an immutable lazy dict.
        self.frozen = FrozenLazyDict(data, _id=_id, _ids=_ids, rnd=rnd)
        self.data = self.frozen.data
        self.id = _id
        self.ids = _ids

    def __getitem__(self, item):
        return self.frozen[item]

    def __setitem__(self, key: str, value):
        self.frozen[key] = value

    def __delitem__(self, key):
        del self.frozen[key]

    def __getattr__(self, item):
        &#34;&#34;&#34;
        &gt;&gt;&gt; d = FrozenIdentifiedDict(x=5)
        &gt;&gt;&gt; f = lambda x: {&#34;y&#34;: x**x, &#34;_history&#34;: ...}
        &gt;&gt;&gt; f.metadata = {&#34;name&#34;: &#34;function f&#34;}
        &gt;&gt;&gt; (d &gt;&gt; f).history
        {0: {&#39;name&#39;: &#39;function f&#39;}}
        &#34;&#34;&#34;
        if item in self.frozen:
            return self.frozen[item]
        _item = &#34;_&#34; + item
        if _item in self.frozen:
            return self.frozen[_item]
        raise AttributeError

    def evaluate(self):
        &#34;&#34;&#34;
        &gt;&gt;&gt; from idict.core.frozenidentifieddict import FrozenIdentifiedDict as idict
        &gt;&gt;&gt; f = lambda x: {&#34;y&#34;: x+2}
        &gt;&gt;&gt; d = idict(x=3)
        &gt;&gt;&gt; a = d &gt;&gt; f
        &gt;&gt;&gt; a.show(colored=False)
        {
            &#34;y&#34;: &#34;â†’(x)&#34;,
            &#34;x&#34;: 3,
            &#34;_id&#34;: &#34;NfDlK1.4MFGwvI9SXFRBUlgdD0.xW4AU0sYuSnwe&#34;,
            &#34;_ids&#34;: {
                &#34;y&#34;: &#34;r6qgPdf1kPTU.K8bw-R-e0PzHWZxW4AU0sYuSnwe&#34;,
                &#34;x&#34;: &#34;n4_51866e4dc164a1c5cd82c0babdafb9a65d5ab (content: S5_331b7e710abd1443cd82d6b5cdafb9f04d5ab)&#34;
            }
        }
        &gt;&gt;&gt; a.evaluate()
        &gt;&gt;&gt; a.show(colored=False)
        {
            &#34;y&#34;: 5,
            &#34;x&#34;: 3,
            &#34;_id&#34;: &#34;NfDlK1.4MFGwvI9SXFRBUlgdD0.xW4AU0sYuSnwe&#34;,
            &#34;_ids&#34;: {
                &#34;y&#34;: &#34;r6qgPdf1kPTU.K8bw-R-e0PzHWZxW4AU0sYuSnwe&#34;,
                &#34;x&#34;: &#34;n4_51866e4dc164a1c5cd82c0babdafb9a65d5ab (content: S5_331b7e710abd1443cd82d6b5cdafb9f04d5ab)&#34;
            }
        }
        &#34;&#34;&#34;
        self.frozen.evaluate()

    @property
    def asdict(self):
        &#34;&#34;&#34;
        &gt;&gt;&gt; from idict.core.frozenidentifieddict import FrozenIdentifiedDict as idict
        &gt;&gt;&gt; d = idict(x=3, y=5)
        &gt;&gt;&gt; d.id
        &#39;Gm_969c1762a9edc78bf5dc236c663f77f39933b&#39;
        &gt;&gt;&gt; e = idict(x=7, y=8, d=d)
        &gt;&gt;&gt; e.asdict
        {&#39;x&#39;: 7, &#39;y&#39;: 8, &#39;d&#39;: {&#39;x&#39;: 3, &#39;y&#39;: 5, &#39;_id&#39;: &#39;Gm_969c1762a9edc78bf5dc236c663f77f39933b&#39;, &#39;_ids&#39;: {&#39;x&#39;: &#39;n4_51866e4dc164a1c5cd82c0babdafb9a65d5ab&#39;, &#39;y&#39;: &#39;ii_6ee7b815d7ae16c5384a72b1b88fbd4d3cd8f&#39;}}, &#39;_id&#39;: &#39;dc_ecfbc17842ca0e082a02528315f3aee08ff89&#39;, &#39;_ids&#39;: {&#39;x&#39;: &#39;Ak_4864e8a41a20ba9d64284c45f82a491dd8065&#39;, &#39;y&#39;: &#39;Ny_2c054fb898b960f9bf0d1fd7c59add74ecbf8&#39;, &#39;d&#39;: &#39;Tk_c466af3b9f5f550ef5dc0d51663f77a9a933b&#39;}}
        &gt;&gt;&gt; d.hosh ** key2id(&#34;d&#34;, d.identity.digits) == e.hoshes[&#34;d&#34;]
        True
        &#34;&#34;&#34;
        return self.frozen.asdict

    def clone(self, data=None, rnd=None, _cloned=None):
        cloned_internals = _cloned or dict(blobs=self.blobs, hashes=self.hashes, hoshes=self.hoshes, hosh=self.hosh)
        return FrozenIdentifiedDict(
            data or self.data, rnd=rnd or self.rnd, identity=self.identity, _cloned=cloned_internals
        )

    def __hash__(self):
        return hash(self.hosh)

    def show(self, colored=True, width=None):
        r&#34;&#34;&#34;
        &gt;&gt;&gt; idict = FrozenIdentifiedDict
        &gt;&gt;&gt; idict(x=134124, y= 56).show(colored=False)
        {
            &#34;x&#34;: 134124,
            &#34;y&#34;: 56,
            &#34;_id&#34;: &#34;tV_c3c37026dc9a795bb61f18be755b7a8a094f2&#34;,
            &#34;_ids&#34;: {
                &#34;x&#34;: &#34;Ad_045ef613e3a78b8b54468cccd1fe32d9f4bae (content: 3f_cbb9283e13010e09544692d7e1fe3224e4bae)&#34;,
                &#34;y&#34;: &#34;UH_5e477903f808edcf52d8abe1a36c38b014944 (content: mJ_7beba502c36bca4d52d8120da36c38faf3944)&#34;
            }
        }
        &#34;&#34;&#34;
        CustomJSONEncoder.width = width
        return print(self.all if colored else decolorize(self.all))

    def __repr__(self, all=False):
        return idict2txt(self, all)

    def __str__(self, all=False):
        return decolorize(idict2txt(self, all))

    @property
    def all(self):
        r&#34;&#34;&#34;
        Usage:

        &gt;&gt;&gt; from idict.core.frozenidentifieddict import FrozenIdentifiedDict as idict
        &gt;&gt;&gt; from ldict.core.appearance import decolorize
        &gt;&gt;&gt; out = idict(x=134124, y= 56).all
        &gt;&gt;&gt; decolorize(out)
        &#39;{\n    &#34;x&#34;: 134124,\n    &#34;y&#34;: 56,\n    &#34;_id&#34;: &#34;tV_c3c37026dc9a795bb61f18be755b7a8a094f2&#34;,\n    &#34;_ids&#34;: {\n        &#34;x&#34;: &#34;Ad_045ef613e3a78b8b54468cccd1fe32d9f4bae (content: 3f_cbb9283e13010e09544692d7e1fe3224e4bae)&#34;,\n        &#34;y&#34;: &#34;UH_5e477903f808edcf52d8abe1a36c38b014944 (content: mJ_7beba502c36bca4d52d8120da36c38faf3944)&#34;\n    }\n}&#39;
        &gt;&gt;&gt; from idict.core.frozenidentifieddict import FrozenIdentifiedDict
        &gt;&gt;&gt; d = FrozenIdentifiedDict(x=5, y=7)
        &gt;&gt;&gt; print(d)
        {
            &#34;x&#34;: 5,
            &#34;y&#34;: 7,
            &#34;_id&#34;: &#34;TC_15c7ce3faeb9d063ac62bef6a1b9076a15ee4&#34;,
            &#34;_ids&#34;: &#34;hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f Bk_b75c77bb5e2640ad6428eb35f82a492dd8065&#34;
        }
        &#34;&#34;&#34;
        return self.__repr__(all=True)

    def __eq__(self, other):
        &#34;&#34;&#34;
        &gt;&gt;&gt; from idict import idict
        &gt;&gt;&gt; idict(x=3) == {&#34;x&#34;: 3}
        True
        &gt;&gt;&gt; idict(x=3) == {&#34;x&#34;: 3, &#34;_id&#34;: idict(x=3).id}
        True
        &gt;&gt;&gt; idict(x=3) == idict(x=3)
        True
        &gt;&gt;&gt; idict(x=3) != {&#34;x&#34;: 4}
        True
        &gt;&gt;&gt; idict(x=3) != idict(x=4)
        True
        &gt;&gt;&gt; idict(x=3) != {&#34;y&#34;: 3}
        True
        &gt;&gt;&gt; idict(x=3) != {&#34;x&#34;: 3, &#34;_id&#34;: (~idict(x=3).hosh).id}
        True
        &gt;&gt;&gt; idict(x=3) != idict(y=3)
        True
        &#34;&#34;&#34;
        if isinstance(other, dict):
            if &#34;_id&#34; in other:
                return self.id == other[&#34;_id&#34;]
            if list(self.keys())[:-2] != list(other.keys()):
                return False
        from idict.core.idict_ import Idict

        if isinstance(other, (FrozenIdentifiedDict, Idict)):
            return self.hosh == other.hosh
        if isinstance(other, AbstractLazyDict):
            if self.keys() != other.keys():
                return False
            other.evaluate()
            return self.data == other.data
        if isinstance(other, dict):
            data = self.data.copy()
            del data[&#34;_id&#34;]
            del data[&#34;_ids&#34;]
            return data == other
        raise TypeError(f&#34;Cannot compare {type(self)} and {type(other)}&#34;)  # pragma: no cover

    def __rrshift__(self, left: Union[Random, dict, Callable, iFunctionSpace]):
        if isinstance(left, dict) and not isinstance(left, AbstractLazyDict):
            return FrozenIdentifiedDict(left) &gt;&gt; self
        if isinstance(left, list) or callable(left):
            return iFunctionSpace(left, aop, self)
        if isinstance(left, Random):
            return self.clone(rnd=left)
        return NotImplemented

    def __rshift__(
        self, other: Union[dict, AbstractLazyDict, &#34;FrozenIdentifiedDict&#34;, Callable, iLet, iFunctionSpace, Random]
    ):
        from idict.core.rshift import application, ihandle_dict
        from idict.core.idict_ import Idict

        if isinstance(other, (Idict, FrozenIdentifiedDict)):
            clone = self.clone(rnd=other.rnd) if other.rnd else self.clone()
            for k, v in other.data.items():
                if k not in [&#34;_id&#34;, &#34;_ids&#34;]:
                    clone.data[k] = v
                    if k in other.blobs:
                        clone.blobs[k] = other.blobs[k]
                    if k in other.hashes:
                        clone.blobs[k] = other.hashes[k]
                    clone.hoshes[k] = other.hoshes[k]
            hosh = reduce(operator.mul, [self.identity] + [v for k, v in clone.hoshes.items() if not k.startswith(&#34;_&#34;)])
            internals = dict(blobs=clone.blobs, hashes=clone.hashes, hoshes=clone.hoshes, hosh=hosh)
            del clone.data[&#34;_id&#34;]
            del clone.data[&#34;_ids&#34;]
            return FrozenIdentifiedDict(clone.data, rnd=clone.rnd, _cloned=internals, **{k: v})
        if isinstance(other, dict):
            return ihandle_dict(self, other)
        if isinstance(other, Random):
            return self.clone(rnd=other)
        if isinstance(other, iLet):
            return application(self, other, other.f, other.bytes)
        if callable(other):
            return application(self, other, other, self.identity)
        if isinstance(other, list):
            d = self
            for cache in other:
                d = cached(d, cache)
            return d
        if isinstance(other, iFunctionSpace):
            return reduce3(lambda a, op, b: op(a, b), (self, aop) + other.functions)
        return NotImplemented

    def __rxor__(self, left: Union[Random, dict, Callable, iFunctionSpace]):
        if (isinstance(left, (dict, list, Random)) or callable(left)) and not isinstance(left, AbstractLazyDict):
            return iFunctionSpace(left, cop, self)
        return NotImplemented

    def __xor__(self, other: Union[dict, AbstractLazyDict, Callable, iLet, iFunctionSpace, Random]):
        if callable(other) or isinstance(other, (dict, Random, list, iLet)):
            return cached(self, GLOBAL[&#34;cache&#34;]) &gt;&gt; other
        if isinstance(other, iFunctionSpace):
            return reduce3(lambda a, op, b: op(a, b), (self, cop) + other.functions)
        return NotImplemented</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="idict.core.frozenidentifieddict.FrozenIdentifiedDict"><code class="flex name class">
<span>class <span class="ident">FrozenIdentifiedDict</span></span>
<span>(</span><span>rnd=None, identity=[38;5;159m[1m[48;5;0m0[0m[38;5;123m[1m[48;5;0m0[0m[38;5;195m[1m[48;5;0m0[0m[38;5;194m[1m[48;5;0m0[0m[38;5;153m[1m[48;5;0m0[0m[38;5;123m[1m[48;5;0m0[0m[38;5;157m[1m[48;5;0m0[0m[38;5;117m[1m[48;5;0m0[0m[38;5;86m[1m[48;5;0m0[0m[38;5;158m[1m[48;5;0m0[0m[38;5;117m[1m[48;5;0m0[0m[38;5;123m[1m[48;5;0m0[0m[38;5;159m[1m[48;5;0m0[0m[38;5;157m[1m[48;5;0m0[0m[38;5;147m[1m[48;5;0m0[0m[38;5;86m[1m[48;5;0m0[0m[38;5;159m[1m[48;5;0m0[0m[38;5;123m[1m[48;5;0m0[0m[38;5;195m[1m[48;5;0m0[0m[38;5;194m[1m[48;5;0m0[0m[38;5;153m[1m[48;5;0m0[0m[38;5;123m[1m[48;5;0m0[0m[38;5;157m[1m[48;5;0m0[0m[38;5;117m[1m[48;5;0m0[0m[38;5;86m[1m[48;5;0m0[0m[38;5;158m[1m[48;5;0m0[0m[38;5;117m[1m[48;5;0m0[0m[38;5;123m[1m[48;5;0m0[0m[38;5;159m[1m[48;5;0m0[0m[38;5;157m[1m[48;5;0m0[0m[38;5;147m[1m[48;5;0m0[0m[38;5;86m[1m[48;5;0m0[0m[38;5;159m[1m[48;5;0m0[0m[38;5;123m[1m[48;5;0m0[0m[38;5;195m[1m[48;5;0m0[0m[38;5;194m[1m[48;5;0m0[0m[38;5;153m[1m[48;5;0m0[0m[38;5;123m[1m[48;5;0m0[0m[38;5;157m[1m[48;5;0m0[0m[38;5;117m[1m[48;5;0m0[0m, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Immutable lazy universally identified dict for serializable (picklable) pairs str-&gt;value</p>
<p>Usage:</p>
<pre><code class="language-python-repl">&gt;&gt;&gt; idict = FrozenIdentifiedDict
&gt;&gt;&gt; idict().show(colored=False)
{
    &quot;_id&quot;: &quot;0000000000000000000000000000000000000000&quot;,
    &quot;_ids&quot;: {}
}
&gt;&gt;&gt; d = idict(x=5, y=3)
&gt;&gt;&gt; d.show(colored=False)
{
    &quot;x&quot;: 5,
    &quot;y&quot;: 3,
    &quot;_id&quot;: &quot;Gm_5a27861eacedc78bf5dc236c663f77f39933b&quot;,
    &quot;_ids&quot;: {
        &quot;x&quot;: &quot;hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f (content: Mj_3bcd9aefb5020343384ae8ccb88fbd872cd8f)&quot;,
        &quot;y&quot;: &quot;o4_fcbb3f8a5c5a37c5cd8260aabdafb9b65d5ab (content: S5_331b7e710abd1443cd82d6b5cdafb9f04d5ab)&quot;
    }
}
&gt;&gt;&gt; d[&quot;y&quot;]
3
&gt;&gt;&gt; idict(y=88, x=123123).show(colored=False)
{
    &quot;y&quot;: 88,
    &quot;x&quot;: 123123,
    &quot;_id&quot;: &quot;S-_6a05b897eed2728ea8200aa3f9e90651e952a&quot;,
    &quot;_ids&quot;: {
        &quot;y&quot;: &quot;EV_f4049757e5085edc56b4262974be71951792a (content: 6X_ceb4a9cfad6b3b5a56b49c3484be71dff692a)&quot;,
        &quot;x&quot;: &quot;d5_fa01214009ca14a1527bd38a753b84cbc2cff (content: I6_bcc6fa41b424962f427be985853b8416b2cff)&quot;
    }
}
&gt;&gt;&gt; d = idict(x=123123, y=88)
&gt;&gt;&gt; d2 = d &gt;&gt; (lambda x: {&quot;z&quot;: x**2})
&gt;&gt;&gt; d2.hosh == d2.identity * d2.ids[&quot;z&quot;] * d2.ids[&quot;x&quot;] * d2.ids[&quot;y&quot;]
True
&gt;&gt;&gt; e = d2 &gt;&gt; (lambda x,y: {&quot;w&quot;: x/y})
&gt;&gt;&gt; e.show(colored=False)
{
    &quot;w&quot;: &quot;â†’(x y)&quot;,
    &quot;z&quot;: &quot;â†’(x)&quot;,
    &quot;x&quot;: 123123,
    &quot;y&quot;: 88,
    &quot;_id&quot;: &quot;jWguT1MkE.y2lbZAetjGw2tmoFRZsuLzkF84sOwe&quot;,
    &quot;_ids&quot;: {
        &quot;w&quot;: &quot;rl51vcB3tJbMS6y7RQHwJ1c51F.fTbFo4RK7M5M5&quot;,
        &quot;z&quot;: &quot;FI8-Sco6sGMjxpkIQ8-uTHfhAKZJBi6bgQpYHIM8&quot;,
        &quot;x&quot;: &quot;d5_fa01214009ca14a1527bd38a753b84cbc2cff (content: I6_bcc6fa41b424962f427be985853b8416b2cff)&quot;,
        &quot;y&quot;: &quot;EV_f4049757e5085edc56b4262974be71951792a (content: 6X_ceb4a9cfad6b3b5a56b49c3484be71dff692a)&quot;
    }
}
&gt;&gt;&gt; a = d &gt;&gt; (lambda x: {&quot;z&quot;: x**2}) &gt;&gt; (lambda x, y: {&quot;w&quot;: x/y})
&gt;&gt;&gt; b = d &gt;&gt; (lambda x, y: {&quot;w&quot;: x/y}) &gt;&gt; (lambda x: {&quot;z&quot;: x**2})
&gt;&gt;&gt; dic = d.asdict  # Converting to dict
&gt;&gt;&gt; dic
{'x': 123123, 'y': 88, '_id': 'S-_6a05b897eed2728ea8200aa3f9e90651e952a', '_ids': {'x': 'd5_fa01214009ca14a1527bd38a753b84cbc2cff', 'y': 'EV_f4049757e5085edc56b4262974be71951792a'}}
&gt;&gt;&gt; d2 = idict(dic)  # Reconstructing from a dict
&gt;&gt;&gt; d2.show(colored=False)
{
    &quot;x&quot;: 123123,
    &quot;y&quot;: 88,
    &quot;_id&quot;: &quot;S-_6a05b897eed2728ea8200aa3f9e90651e952a&quot;,
    &quot;_ids&quot;: {
        &quot;x&quot;: &quot;d5_fa01214009ca14a1527bd38a753b84cbc2cff&quot;,
        &quot;y&quot;: &quot;EV_f4049757e5085edc56b4262974be71951792a&quot;
    }
}
&gt;&gt;&gt; d == d2
True
&gt;&gt;&gt; from idict import Ã˜, setup
&gt;&gt;&gt; d = idict() &gt;&gt; {&quot;x&quot;: &quot;more content&quot;}
&gt;&gt;&gt; d.show(colored=False)
{
    &quot;x&quot;: &quot;more content&quot;,
    &quot;_id&quot;: &quot;aF_64eaced14bf0114a6b9eceaac31744c2093df&quot;,
    &quot;_ids&quot;: {
        &quot;x&quot;: &quot;aF_64eaced14bf0114a6b9eceaac31744c2093df&quot;
    }
}
&gt;&gt;&gt; f = lambda x,y: {&quot;z&quot;:x+y}
&gt;&gt;&gt; d = idict(x=5, y=7)
&gt;&gt;&gt; d2 = d &gt;&gt; f
&gt;&gt;&gt; d2.show(colored=False)
{
    &quot;z&quot;: &quot;â†’(x y)&quot;,
    &quot;x&quot;: 5,
    &quot;y&quot;: 7,
    &quot;_id&quot;: &quot;GNYCBw8fGAYow5Ml4xadiKc3TxKm.mdn2sxVEnRv&quot;,
    &quot;_ids&quot;: {
        &quot;z&quot;: &quot;pgVTwHntCH.mN6xVFQ0NIDD72QAm.mdn2sxVEnRv&quot;,
        &quot;x&quot;: &quot;hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f (content: Mj_3bcd9aefb5020343384ae8ccb88fbd872cd8f)&quot;,
        &quot;y&quot;: &quot;Bk_b75c77bb5e2640ad6428eb35f82a492dd8065 (content: 3m_131910d18a892d1b64285250092a4967c8065)&quot;
    }
}
&gt;&gt;&gt; c = {}
&gt;&gt;&gt; d3 = d2 &gt;&gt; [c]
&gt;&gt;&gt; d3.show(colored=False)
{
    &quot;z&quot;: &quot;â†’(^ x y)&quot;,
    &quot;x&quot;: 5,
    &quot;y&quot;: 7,
    &quot;_id&quot;: &quot;GNYCBw8fGAYow5Ml4xadiKc3TxKm.mdn2sxVEnRv&quot;,
    &quot;_ids&quot;: {
        &quot;z&quot;: &quot;pgVTwHntCH.mN6xVFQ0NIDD72QAm.mdn2sxVEnRv&quot;,
        &quot;x&quot;: &quot;hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f (content: Mj_3bcd9aefb5020343384ae8ccb88fbd872cd8f)&quot;,
        &quot;y&quot;: &quot;Bk_b75c77bb5e2640ad6428eb35f82a492dd8065 (content: 3m_131910d18a892d1b64285250092a4967c8065)&quot;
    }
}
&gt;&gt;&gt; c
{}
&gt;&gt;&gt; d3.z
12
&gt;&gt;&gt; c
{'pgVTwHntCH.mN6xVFQ0NIDD72QAm.mdn2sxVEnRv': 12, 'hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f': 5, 'Bk_b75c77bb5e2640ad6428eb35f82a492dd8065': 7, 'GNYCBw8fGAYow5Ml4xadiKc3TxKm.mdn2sxVEnRv': {'_id': 'GNYCBw8fGAYow5Ml4xadiKc3TxKm.mdn2sxVEnRv', '_ids': {'z': 'pgVTwHntCH.mN6xVFQ0NIDD72QAm.mdn2sxVEnRv', 'x': 'hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f', 'y': 'Bk_b75c77bb5e2640ad6428eb35f82a492dd8065'}}}
&gt;&gt;&gt; d3.show(colored=False)
{
    &quot;z&quot;: 12,
    &quot;x&quot;: 5,
    &quot;y&quot;: 7,
    &quot;_id&quot;: &quot;GNYCBw8fGAYow5Ml4xadiKc3TxKm.mdn2sxVEnRv&quot;,
    &quot;_ids&quot;: {
        &quot;z&quot;: &quot;pgVTwHntCH.mN6xVFQ0NIDD72QAm.mdn2sxVEnRv&quot;,
        &quot;x&quot;: &quot;hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f (content: Mj_3bcd9aefb5020343384ae8ccb88fbd872cd8f)&quot;,
        &quot;y&quot;: &quot;Bk_b75c77bb5e2640ad6428eb35f82a492dd8065 (content: 3m_131910d18a892d1b64285250092a4967c8065)&quot;
    }
}
&gt;&gt;&gt; c = {}
&gt;&gt;&gt; setup(cache=c)
&gt;&gt;&gt; d3 = d &gt;&gt; f ^ Ã˜
&gt;&gt;&gt; d3.show(colored=False)
{
    &quot;z&quot;: &quot;â†’(^ x y)&quot;,
    &quot;x&quot;: 5,
    &quot;y&quot;: 7,
    &quot;_id&quot;: &quot;GNYCBw8fGAYow5Ml4xadiKc3TxKm.mdn2sxVEnRv&quot;,
    &quot;_ids&quot;: {
        &quot;z&quot;: &quot;pgVTwHntCH.mN6xVFQ0NIDD72QAm.mdn2sxVEnRv&quot;,
        &quot;x&quot;: &quot;hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f (content: Mj_3bcd9aefb5020343384ae8ccb88fbd872cd8f)&quot;,
        &quot;y&quot;: &quot;Bk_b75c77bb5e2640ad6428eb35f82a492dd8065 (content: 3m_131910d18a892d1b64285250092a4967c8065)&quot;
    }
}
&gt;&gt;&gt; c
{}
&gt;&gt;&gt; d3.z
12
&gt;&gt;&gt; c
{'pgVTwHntCH.mN6xVFQ0NIDD72QAm.mdn2sxVEnRv': 12, 'hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f': 5, 'Bk_b75c77bb5e2640ad6428eb35f82a492dd8065': 7, 'GNYCBw8fGAYow5Ml4xadiKc3TxKm.mdn2sxVEnRv': {'_id': 'GNYCBw8fGAYow5Ml4xadiKc3TxKm.mdn2sxVEnRv', '_ids': {'z': 'pgVTwHntCH.mN6xVFQ0NIDD72QAm.mdn2sxVEnRv', 'x': 'hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f', 'y': 'Bk_b75c77bb5e2640ad6428eb35f82a492dd8065'}}}
&gt;&gt;&gt; d3.show(colored=False)
{
    &quot;z&quot;: 12,
    &quot;x&quot;: 5,
    &quot;y&quot;: 7,
    &quot;_id&quot;: &quot;GNYCBw8fGAYow5Ml4xadiKc3TxKm.mdn2sxVEnRv&quot;,
    &quot;_ids&quot;: {
        &quot;z&quot;: &quot;pgVTwHntCH.mN6xVFQ0NIDD72QAm.mdn2sxVEnRv&quot;,
        &quot;x&quot;: &quot;hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f (content: Mj_3bcd9aefb5020343384ae8ccb88fbd872cd8f)&quot;,
        &quot;y&quot;: &quot;Bk_b75c77bb5e2640ad6428eb35f82a492dd8065 (content: 3m_131910d18a892d1b64285250092a4967c8065)&quot;
    }
}
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class FrozenIdentifiedDict(AbstractLazyDict):
    &#34;&#34;&#34;Immutable lazy universally identified dict for serializable (picklable) pairs str-&gt;value

    Usage:

    &gt;&gt;&gt; idict = FrozenIdentifiedDict
    &gt;&gt;&gt; idict().show(colored=False)
    {
        &#34;_id&#34;: &#34;0000000000000000000000000000000000000000&#34;,
        &#34;_ids&#34;: {}
    }
    &gt;&gt;&gt; d = idict(x=5, y=3)
    &gt;&gt;&gt; d.show(colored=False)
    {
        &#34;x&#34;: 5,
        &#34;y&#34;: 3,
        &#34;_id&#34;: &#34;Gm_5a27861eacedc78bf5dc236c663f77f39933b&#34;,
        &#34;_ids&#34;: {
            &#34;x&#34;: &#34;hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f (content: Mj_3bcd9aefb5020343384ae8ccb88fbd872cd8f)&#34;,
            &#34;y&#34;: &#34;o4_fcbb3f8a5c5a37c5cd8260aabdafb9b65d5ab (content: S5_331b7e710abd1443cd82d6b5cdafb9f04d5ab)&#34;
        }
    }
    &gt;&gt;&gt; d[&#34;y&#34;]
    3
    &gt;&gt;&gt; idict(y=88, x=123123).show(colored=False)
    {
        &#34;y&#34;: 88,
        &#34;x&#34;: 123123,
        &#34;_id&#34;: &#34;S-_6a05b897eed2728ea8200aa3f9e90651e952a&#34;,
        &#34;_ids&#34;: {
            &#34;y&#34;: &#34;EV_f4049757e5085edc56b4262974be71951792a (content: 6X_ceb4a9cfad6b3b5a56b49c3484be71dff692a)&#34;,
            &#34;x&#34;: &#34;d5_fa01214009ca14a1527bd38a753b84cbc2cff (content: I6_bcc6fa41b424962f427be985853b8416b2cff)&#34;
        }
    }
    &gt;&gt;&gt; d = idict(x=123123, y=88)
    &gt;&gt;&gt; d2 = d &gt;&gt; (lambda x: {&#34;z&#34;: x**2})
    &gt;&gt;&gt; d2.hosh == d2.identity * d2.ids[&#34;z&#34;] * d2.ids[&#34;x&#34;] * d2.ids[&#34;y&#34;]
    True
    &gt;&gt;&gt; e = d2 &gt;&gt; (lambda x,y: {&#34;w&#34;: x/y})
    &gt;&gt;&gt; e.show(colored=False)
    {
        &#34;w&#34;: &#34;â†’(x y)&#34;,
        &#34;z&#34;: &#34;â†’(x)&#34;,
        &#34;x&#34;: 123123,
        &#34;y&#34;: 88,
        &#34;_id&#34;: &#34;jWguT1MkE.y2lbZAetjGw2tmoFRZsuLzkF84sOwe&#34;,
        &#34;_ids&#34;: {
            &#34;w&#34;: &#34;rl51vcB3tJbMS6y7RQHwJ1c51F.fTbFo4RK7M5M5&#34;,
            &#34;z&#34;: &#34;FI8-Sco6sGMjxpkIQ8-uTHfhAKZJBi6bgQpYHIM8&#34;,
            &#34;x&#34;: &#34;d5_fa01214009ca14a1527bd38a753b84cbc2cff (content: I6_bcc6fa41b424962f427be985853b8416b2cff)&#34;,
            &#34;y&#34;: &#34;EV_f4049757e5085edc56b4262974be71951792a (content: 6X_ceb4a9cfad6b3b5a56b49c3484be71dff692a)&#34;
        }
    }
    &gt;&gt;&gt; a = d &gt;&gt; (lambda x: {&#34;z&#34;: x**2}) &gt;&gt; (lambda x, y: {&#34;w&#34;: x/y})
    &gt;&gt;&gt; b = d &gt;&gt; (lambda x, y: {&#34;w&#34;: x/y}) &gt;&gt; (lambda x: {&#34;z&#34;: x**2})
    &gt;&gt;&gt; dic = d.asdict  # Converting to dict
    &gt;&gt;&gt; dic
    {&#39;x&#39;: 123123, &#39;y&#39;: 88, &#39;_id&#39;: &#39;S-_6a05b897eed2728ea8200aa3f9e90651e952a&#39;, &#39;_ids&#39;: {&#39;x&#39;: &#39;d5_fa01214009ca14a1527bd38a753b84cbc2cff&#39;, &#39;y&#39;: &#39;EV_f4049757e5085edc56b4262974be71951792a&#39;}}
    &gt;&gt;&gt; d2 = idict(dic)  # Reconstructing from a dict
    &gt;&gt;&gt; d2.show(colored=False)
    {
        &#34;x&#34;: 123123,
        &#34;y&#34;: 88,
        &#34;_id&#34;: &#34;S-_6a05b897eed2728ea8200aa3f9e90651e952a&#34;,
        &#34;_ids&#34;: {
            &#34;x&#34;: &#34;d5_fa01214009ca14a1527bd38a753b84cbc2cff&#34;,
            &#34;y&#34;: &#34;EV_f4049757e5085edc56b4262974be71951792a&#34;
        }
    }
    &gt;&gt;&gt; d == d2
    True
    &gt;&gt;&gt; from idict import Ã˜, setup
    &gt;&gt;&gt; d = idict() &gt;&gt; {&#34;x&#34;: &#34;more content&#34;}
    &gt;&gt;&gt; d.show(colored=False)
    {
        &#34;x&#34;: &#34;more content&#34;,
        &#34;_id&#34;: &#34;aF_64eaced14bf0114a6b9eceaac31744c2093df&#34;,
        &#34;_ids&#34;: {
            &#34;x&#34;: &#34;aF_64eaced14bf0114a6b9eceaac31744c2093df&#34;
        }
    }
    &gt;&gt;&gt; f = lambda x,y: {&#34;z&#34;:x+y}
    &gt;&gt;&gt; d = idict(x=5, y=7)
    &gt;&gt;&gt; d2 = d &gt;&gt; f
    &gt;&gt;&gt; d2.show(colored=False)
    {
        &#34;z&#34;: &#34;â†’(x y)&#34;,
        &#34;x&#34;: 5,
        &#34;y&#34;: 7,
        &#34;_id&#34;: &#34;GNYCBw8fGAYow5Ml4xadiKc3TxKm.mdn2sxVEnRv&#34;,
        &#34;_ids&#34;: {
            &#34;z&#34;: &#34;pgVTwHntCH.mN6xVFQ0NIDD72QAm.mdn2sxVEnRv&#34;,
            &#34;x&#34;: &#34;hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f (content: Mj_3bcd9aefb5020343384ae8ccb88fbd872cd8f)&#34;,
            &#34;y&#34;: &#34;Bk_b75c77bb5e2640ad6428eb35f82a492dd8065 (content: 3m_131910d18a892d1b64285250092a4967c8065)&#34;
        }
    }
    &gt;&gt;&gt; c = {}
    &gt;&gt;&gt; d3 = d2 &gt;&gt; [c]
    &gt;&gt;&gt; d3.show(colored=False)
    {
        &#34;z&#34;: &#34;â†’(^ x y)&#34;,
        &#34;x&#34;: 5,
        &#34;y&#34;: 7,
        &#34;_id&#34;: &#34;GNYCBw8fGAYow5Ml4xadiKc3TxKm.mdn2sxVEnRv&#34;,
        &#34;_ids&#34;: {
            &#34;z&#34;: &#34;pgVTwHntCH.mN6xVFQ0NIDD72QAm.mdn2sxVEnRv&#34;,
            &#34;x&#34;: &#34;hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f (content: Mj_3bcd9aefb5020343384ae8ccb88fbd872cd8f)&#34;,
            &#34;y&#34;: &#34;Bk_b75c77bb5e2640ad6428eb35f82a492dd8065 (content: 3m_131910d18a892d1b64285250092a4967c8065)&#34;
        }
    }
    &gt;&gt;&gt; c
    {}
    &gt;&gt;&gt; d3.z
    12
    &gt;&gt;&gt; c
    {&#39;pgVTwHntCH.mN6xVFQ0NIDD72QAm.mdn2sxVEnRv&#39;: 12, &#39;hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f&#39;: 5, &#39;Bk_b75c77bb5e2640ad6428eb35f82a492dd8065&#39;: 7, &#39;GNYCBw8fGAYow5Ml4xadiKc3TxKm.mdn2sxVEnRv&#39;: {&#39;_id&#39;: &#39;GNYCBw8fGAYow5Ml4xadiKc3TxKm.mdn2sxVEnRv&#39;, &#39;_ids&#39;: {&#39;z&#39;: &#39;pgVTwHntCH.mN6xVFQ0NIDD72QAm.mdn2sxVEnRv&#39;, &#39;x&#39;: &#39;hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f&#39;, &#39;y&#39;: &#39;Bk_b75c77bb5e2640ad6428eb35f82a492dd8065&#39;}}}
    &gt;&gt;&gt; d3.show(colored=False)
    {
        &#34;z&#34;: 12,
        &#34;x&#34;: 5,
        &#34;y&#34;: 7,
        &#34;_id&#34;: &#34;GNYCBw8fGAYow5Ml4xadiKc3TxKm.mdn2sxVEnRv&#34;,
        &#34;_ids&#34;: {
            &#34;z&#34;: &#34;pgVTwHntCH.mN6xVFQ0NIDD72QAm.mdn2sxVEnRv&#34;,
            &#34;x&#34;: &#34;hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f (content: Mj_3bcd9aefb5020343384ae8ccb88fbd872cd8f)&#34;,
            &#34;y&#34;: &#34;Bk_b75c77bb5e2640ad6428eb35f82a492dd8065 (content: 3m_131910d18a892d1b64285250092a4967c8065)&#34;
        }
    }
    &gt;&gt;&gt; c = {}
    &gt;&gt;&gt; setup(cache=c)
    &gt;&gt;&gt; d3 = d &gt;&gt; f ^ Ã˜
    &gt;&gt;&gt; d3.show(colored=False)
    {
        &#34;z&#34;: &#34;â†’(^ x y)&#34;,
        &#34;x&#34;: 5,
        &#34;y&#34;: 7,
        &#34;_id&#34;: &#34;GNYCBw8fGAYow5Ml4xadiKc3TxKm.mdn2sxVEnRv&#34;,
        &#34;_ids&#34;: {
            &#34;z&#34;: &#34;pgVTwHntCH.mN6xVFQ0NIDD72QAm.mdn2sxVEnRv&#34;,
            &#34;x&#34;: &#34;hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f (content: Mj_3bcd9aefb5020343384ae8ccb88fbd872cd8f)&#34;,
            &#34;y&#34;: &#34;Bk_b75c77bb5e2640ad6428eb35f82a492dd8065 (content: 3m_131910d18a892d1b64285250092a4967c8065)&#34;
        }
    }
    &gt;&gt;&gt; c
    {}
    &gt;&gt;&gt; d3.z
    12
    &gt;&gt;&gt; c
    {&#39;pgVTwHntCH.mN6xVFQ0NIDD72QAm.mdn2sxVEnRv&#39;: 12, &#39;hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f&#39;: 5, &#39;Bk_b75c77bb5e2640ad6428eb35f82a492dd8065&#39;: 7, &#39;GNYCBw8fGAYow5Ml4xadiKc3TxKm.mdn2sxVEnRv&#39;: {&#39;_id&#39;: &#39;GNYCBw8fGAYow5Ml4xadiKc3TxKm.mdn2sxVEnRv&#39;, &#39;_ids&#39;: {&#39;z&#39;: &#39;pgVTwHntCH.mN6xVFQ0NIDD72QAm.mdn2sxVEnRv&#39;, &#39;x&#39;: &#39;hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f&#39;, &#39;y&#39;: &#39;Bk_b75c77bb5e2640ad6428eb35f82a492dd8065&#39;}}}
    &gt;&gt;&gt; d3.show(colored=False)
    {
        &#34;z&#34;: 12,
        &#34;x&#34;: 5,
        &#34;y&#34;: 7,
        &#34;_id&#34;: &#34;GNYCBw8fGAYow5Ml4xadiKc3TxKm.mdn2sxVEnRv&#34;,
        &#34;_ids&#34;: {
            &#34;z&#34;: &#34;pgVTwHntCH.mN6xVFQ0NIDD72QAm.mdn2sxVEnRv&#34;,
            &#34;x&#34;: &#34;hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f (content: Mj_3bcd9aefb5020343384ae8ccb88fbd872cd8f)&#34;,
            &#34;y&#34;: &#34;Bk_b75c77bb5e2640ad6428eb35f82a492dd8065 (content: 3m_131910d18a892d1b64285250092a4967c8065)&#34;
        }
    }
    &#34;&#34;&#34;

    hosh: Hosh

    # noinspection PyMissingConstructor
    def __init__(self, /, _dictionary=None, _id=None, _ids=None, rnd=None, identity=Ã¸40, _cloned=None, **kwargs):
        self.rnd = rnd
        self.identity = identity
        data = _dictionary or {}
        data.update(kwargs)

        # Freeze mutable *dicts.
        for k, v in data.items():
            if isinstance(v, AbstractMutableLazyDict):
                data[k] = v.frozen

        if _cloned:
            self.blobs = _cloned[&#34;blobs&#34;]
            self.hashes = _cloned[&#34;hashes&#34;]
            self.hoshes = _cloned[&#34;hoshes&#34;]
            self.hosh = _cloned[&#34;hosh&#34;]
        else:
            if &#34;_id&#34; in data:
                if _id:  # pragma: no cover
                    raise Exception(f&#34;Conflicting &#39;id&#39; values: {_id} and {data[&#39;_id&#39;]}&#34;)
                _id = data.pop(&#34;_id&#34;)
            if &#34;_ids&#34; in data:
                if _ids:  # pragma: no cover
                    raise Exception(f&#34;Conflicting &#39;ids&#39; values: {_ids} and {data[&#39;_ids&#39;]}&#34;)
                _ids = data.pop(&#34;_ids&#34;)

            if _id:
                if _ids is None:  # pragma: no cover
                    raise Exception(f&#34;&#39;id&#39; {_id} given, but &#39;ids&#39; is missing.&#34;)
                self.blobs = {}
                self.hashes = {}
                self.hoshes = {k: identity * v for k, v in _ids.items()}
            else:
                self.blobs, self.hashes, self.hoshes = blobs_hashes_hoshes(
                    data, identity, _ids or {}, self.identity.version
                ).values()
            self.hosh = reduce(operator.mul, [identity] + [v for k, v in self.hoshes.items() if not k.startswith(&#34;_&#34;)])

        if _id is None:
            _id = self.hosh.id
            try:
                _ids = {k: v.id for k, v in self.hoshes.items()}
            except:  # pragma: no cover
                print(self.hoshes)
                raise Exception()

        # Store as an immutable lazy dict.
        self.frozen = FrozenLazyDict(data, _id=_id, _ids=_ids, rnd=rnd)
        self.data = self.frozen.data
        self.id = _id
        self.ids = _ids

    def __getitem__(self, item):
        return self.frozen[item]

    def __setitem__(self, key: str, value):
        self.frozen[key] = value

    def __delitem__(self, key):
        del self.frozen[key]

    def __getattr__(self, item):
        &#34;&#34;&#34;
        &gt;&gt;&gt; d = FrozenIdentifiedDict(x=5)
        &gt;&gt;&gt; f = lambda x: {&#34;y&#34;: x**x, &#34;_history&#34;: ...}
        &gt;&gt;&gt; f.metadata = {&#34;name&#34;: &#34;function f&#34;}
        &gt;&gt;&gt; (d &gt;&gt; f).history
        {0: {&#39;name&#39;: &#39;function f&#39;}}
        &#34;&#34;&#34;
        if item in self.frozen:
            return self.frozen[item]
        _item = &#34;_&#34; + item
        if _item in self.frozen:
            return self.frozen[_item]
        raise AttributeError

    def evaluate(self):
        &#34;&#34;&#34;
        &gt;&gt;&gt; from idict.core.frozenidentifieddict import FrozenIdentifiedDict as idict
        &gt;&gt;&gt; f = lambda x: {&#34;y&#34;: x+2}
        &gt;&gt;&gt; d = idict(x=3)
        &gt;&gt;&gt; a = d &gt;&gt; f
        &gt;&gt;&gt; a.show(colored=False)
        {
            &#34;y&#34;: &#34;â†’(x)&#34;,
            &#34;x&#34;: 3,
            &#34;_id&#34;: &#34;NfDlK1.4MFGwvI9SXFRBUlgdD0.xW4AU0sYuSnwe&#34;,
            &#34;_ids&#34;: {
                &#34;y&#34;: &#34;r6qgPdf1kPTU.K8bw-R-e0PzHWZxW4AU0sYuSnwe&#34;,
                &#34;x&#34;: &#34;n4_51866e4dc164a1c5cd82c0babdafb9a65d5ab (content: S5_331b7e710abd1443cd82d6b5cdafb9f04d5ab)&#34;
            }
        }
        &gt;&gt;&gt; a.evaluate()
        &gt;&gt;&gt; a.show(colored=False)
        {
            &#34;y&#34;: 5,
            &#34;x&#34;: 3,
            &#34;_id&#34;: &#34;NfDlK1.4MFGwvI9SXFRBUlgdD0.xW4AU0sYuSnwe&#34;,
            &#34;_ids&#34;: {
                &#34;y&#34;: &#34;r6qgPdf1kPTU.K8bw-R-e0PzHWZxW4AU0sYuSnwe&#34;,
                &#34;x&#34;: &#34;n4_51866e4dc164a1c5cd82c0babdafb9a65d5ab (content: S5_331b7e710abd1443cd82d6b5cdafb9f04d5ab)&#34;
            }
        }
        &#34;&#34;&#34;
        self.frozen.evaluate()

    @property
    def asdict(self):
        &#34;&#34;&#34;
        &gt;&gt;&gt; from idict.core.frozenidentifieddict import FrozenIdentifiedDict as idict
        &gt;&gt;&gt; d = idict(x=3, y=5)
        &gt;&gt;&gt; d.id
        &#39;Gm_969c1762a9edc78bf5dc236c663f77f39933b&#39;
        &gt;&gt;&gt; e = idict(x=7, y=8, d=d)
        &gt;&gt;&gt; e.asdict
        {&#39;x&#39;: 7, &#39;y&#39;: 8, &#39;d&#39;: {&#39;x&#39;: 3, &#39;y&#39;: 5, &#39;_id&#39;: &#39;Gm_969c1762a9edc78bf5dc236c663f77f39933b&#39;, &#39;_ids&#39;: {&#39;x&#39;: &#39;n4_51866e4dc164a1c5cd82c0babdafb9a65d5ab&#39;, &#39;y&#39;: &#39;ii_6ee7b815d7ae16c5384a72b1b88fbd4d3cd8f&#39;}}, &#39;_id&#39;: &#39;dc_ecfbc17842ca0e082a02528315f3aee08ff89&#39;, &#39;_ids&#39;: {&#39;x&#39;: &#39;Ak_4864e8a41a20ba9d64284c45f82a491dd8065&#39;, &#39;y&#39;: &#39;Ny_2c054fb898b960f9bf0d1fd7c59add74ecbf8&#39;, &#39;d&#39;: &#39;Tk_c466af3b9f5f550ef5dc0d51663f77a9a933b&#39;}}
        &gt;&gt;&gt; d.hosh ** key2id(&#34;d&#34;, d.identity.digits) == e.hoshes[&#34;d&#34;]
        True
        &#34;&#34;&#34;
        return self.frozen.asdict

    def clone(self, data=None, rnd=None, _cloned=None):
        cloned_internals = _cloned or dict(blobs=self.blobs, hashes=self.hashes, hoshes=self.hoshes, hosh=self.hosh)
        return FrozenIdentifiedDict(
            data or self.data, rnd=rnd or self.rnd, identity=self.identity, _cloned=cloned_internals
        )

    def __hash__(self):
        return hash(self.hosh)

    def show(self, colored=True, width=None):
        r&#34;&#34;&#34;
        &gt;&gt;&gt; idict = FrozenIdentifiedDict
        &gt;&gt;&gt; idict(x=134124, y= 56).show(colored=False)
        {
            &#34;x&#34;: 134124,
            &#34;y&#34;: 56,
            &#34;_id&#34;: &#34;tV_c3c37026dc9a795bb61f18be755b7a8a094f2&#34;,
            &#34;_ids&#34;: {
                &#34;x&#34;: &#34;Ad_045ef613e3a78b8b54468cccd1fe32d9f4bae (content: 3f_cbb9283e13010e09544692d7e1fe3224e4bae)&#34;,
                &#34;y&#34;: &#34;UH_5e477903f808edcf52d8abe1a36c38b014944 (content: mJ_7beba502c36bca4d52d8120da36c38faf3944)&#34;
            }
        }
        &#34;&#34;&#34;
        CustomJSONEncoder.width = width
        return print(self.all if colored else decolorize(self.all))

    def __repr__(self, all=False):
        return idict2txt(self, all)

    def __str__(self, all=False):
        return decolorize(idict2txt(self, all))

    @property
    def all(self):
        r&#34;&#34;&#34;
        Usage:

        &gt;&gt;&gt; from idict.core.frozenidentifieddict import FrozenIdentifiedDict as idict
        &gt;&gt;&gt; from ldict.core.appearance import decolorize
        &gt;&gt;&gt; out = idict(x=134124, y= 56).all
        &gt;&gt;&gt; decolorize(out)
        &#39;{\n    &#34;x&#34;: 134124,\n    &#34;y&#34;: 56,\n    &#34;_id&#34;: &#34;tV_c3c37026dc9a795bb61f18be755b7a8a094f2&#34;,\n    &#34;_ids&#34;: {\n        &#34;x&#34;: &#34;Ad_045ef613e3a78b8b54468cccd1fe32d9f4bae (content: 3f_cbb9283e13010e09544692d7e1fe3224e4bae)&#34;,\n        &#34;y&#34;: &#34;UH_5e477903f808edcf52d8abe1a36c38b014944 (content: mJ_7beba502c36bca4d52d8120da36c38faf3944)&#34;\n    }\n}&#39;
        &gt;&gt;&gt; from idict.core.frozenidentifieddict import FrozenIdentifiedDict
        &gt;&gt;&gt; d = FrozenIdentifiedDict(x=5, y=7)
        &gt;&gt;&gt; print(d)
        {
            &#34;x&#34;: 5,
            &#34;y&#34;: 7,
            &#34;_id&#34;: &#34;TC_15c7ce3faeb9d063ac62bef6a1b9076a15ee4&#34;,
            &#34;_ids&#34;: &#34;hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f Bk_b75c77bb5e2640ad6428eb35f82a492dd8065&#34;
        }
        &#34;&#34;&#34;
        return self.__repr__(all=True)

    def __eq__(self, other):
        &#34;&#34;&#34;
        &gt;&gt;&gt; from idict import idict
        &gt;&gt;&gt; idict(x=3) == {&#34;x&#34;: 3}
        True
        &gt;&gt;&gt; idict(x=3) == {&#34;x&#34;: 3, &#34;_id&#34;: idict(x=3).id}
        True
        &gt;&gt;&gt; idict(x=3) == idict(x=3)
        True
        &gt;&gt;&gt; idict(x=3) != {&#34;x&#34;: 4}
        True
        &gt;&gt;&gt; idict(x=3) != idict(x=4)
        True
        &gt;&gt;&gt; idict(x=3) != {&#34;y&#34;: 3}
        True
        &gt;&gt;&gt; idict(x=3) != {&#34;x&#34;: 3, &#34;_id&#34;: (~idict(x=3).hosh).id}
        True
        &gt;&gt;&gt; idict(x=3) != idict(y=3)
        True
        &#34;&#34;&#34;
        if isinstance(other, dict):
            if &#34;_id&#34; in other:
                return self.id == other[&#34;_id&#34;]
            if list(self.keys())[:-2] != list(other.keys()):
                return False
        from idict.core.idict_ import Idict

        if isinstance(other, (FrozenIdentifiedDict, Idict)):
            return self.hosh == other.hosh
        if isinstance(other, AbstractLazyDict):
            if self.keys() != other.keys():
                return False
            other.evaluate()
            return self.data == other.data
        if isinstance(other, dict):
            data = self.data.copy()
            del data[&#34;_id&#34;]
            del data[&#34;_ids&#34;]
            return data == other
        raise TypeError(f&#34;Cannot compare {type(self)} and {type(other)}&#34;)  # pragma: no cover

    def __rrshift__(self, left: Union[Random, dict, Callable, iFunctionSpace]):
        if isinstance(left, dict) and not isinstance(left, AbstractLazyDict):
            return FrozenIdentifiedDict(left) &gt;&gt; self
        if isinstance(left, list) or callable(left):
            return iFunctionSpace(left, aop, self)
        if isinstance(left, Random):
            return self.clone(rnd=left)
        return NotImplemented

    def __rshift__(
        self, other: Union[dict, AbstractLazyDict, &#34;FrozenIdentifiedDict&#34;, Callable, iLet, iFunctionSpace, Random]
    ):
        from idict.core.rshift import application, ihandle_dict
        from idict.core.idict_ import Idict

        if isinstance(other, (Idict, FrozenIdentifiedDict)):
            clone = self.clone(rnd=other.rnd) if other.rnd else self.clone()
            for k, v in other.data.items():
                if k not in [&#34;_id&#34;, &#34;_ids&#34;]:
                    clone.data[k] = v
                    if k in other.blobs:
                        clone.blobs[k] = other.blobs[k]
                    if k in other.hashes:
                        clone.blobs[k] = other.hashes[k]
                    clone.hoshes[k] = other.hoshes[k]
            hosh = reduce(operator.mul, [self.identity] + [v for k, v in clone.hoshes.items() if not k.startswith(&#34;_&#34;)])
            internals = dict(blobs=clone.blobs, hashes=clone.hashes, hoshes=clone.hoshes, hosh=hosh)
            del clone.data[&#34;_id&#34;]
            del clone.data[&#34;_ids&#34;]
            return FrozenIdentifiedDict(clone.data, rnd=clone.rnd, _cloned=internals, **{k: v})
        if isinstance(other, dict):
            return ihandle_dict(self, other)
        if isinstance(other, Random):
            return self.clone(rnd=other)
        if isinstance(other, iLet):
            return application(self, other, other.f, other.bytes)
        if callable(other):
            return application(self, other, other, self.identity)
        if isinstance(other, list):
            d = self
            for cache in other:
                d = cached(d, cache)
            return d
        if isinstance(other, iFunctionSpace):
            return reduce3(lambda a, op, b: op(a, b), (self, aop) + other.functions)
        return NotImplemented

    def __rxor__(self, left: Union[Random, dict, Callable, iFunctionSpace]):
        if (isinstance(left, (dict, list, Random)) or callable(left)) and not isinstance(left, AbstractLazyDict):
            return iFunctionSpace(left, cop, self)
        return NotImplemented

    def __xor__(self, other: Union[dict, AbstractLazyDict, Callable, iLet, iFunctionSpace, Random]):
        if callable(other) or isinstance(other, (dict, Random, list, iLet)):
            return cached(self, GLOBAL[&#34;cache&#34;]) &gt;&gt; other
        if isinstance(other, iFunctionSpace):
            return reduce3(lambda a, op, b: op(a, b), (self, cop) + other.functions)
        return NotImplemented</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>ldict.core.base.AbstractLazyDict</li>
<li>collections.UserDict</li>
<li>collections.abc.MutableMapping</li>
<li>collections.abc.Mapping</li>
<li>collections.abc.Collection</li>
<li>collections.abc.Sized</li>
<li>collections.abc.Iterable</li>
<li>collections.abc.Container</li>
<li>builtins.dict</li>
<li>typing.Generic</li>
</ul>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="idict.core.iempty.iEmpty" href="iempty.html#idict.core.iempty.iEmpty">iEmpty</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="idict.core.frozenidentifieddict.FrozenIdentifiedDict.hosh"><code class="name">var <span class="ident">hosh</span> :Â garoupa.hosh.Hosh</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Instance variables</h3>
<dl>
<dt id="idict.core.frozenidentifieddict.FrozenIdentifiedDict.all"><code class="name">var <span class="ident">all</span></code></dt>
<dd>
<div class="desc"><p>Usage:</p>
<pre><code class="language-python-repl">&gt;&gt;&gt; from idict.core.frozenidentifieddict import FrozenIdentifiedDict as idict
&gt;&gt;&gt; from ldict.core.appearance import decolorize
&gt;&gt;&gt; out = idict(x=134124, y= 56).all
&gt;&gt;&gt; decolorize(out)
'{\n    &quot;x&quot;: 134124,\n    &quot;y&quot;: 56,\n    &quot;_id&quot;: &quot;tV_c3c37026dc9a795bb61f18be755b7a8a094f2&quot;,\n    &quot;_ids&quot;: {\n        &quot;x&quot;: &quot;Ad_045ef613e3a78b8b54468cccd1fe32d9f4bae (content: 3f_cbb9283e13010e09544692d7e1fe3224e4bae)&quot;,\n        &quot;y&quot;: &quot;UH_5e477903f808edcf52d8abe1a36c38b014944 (content: mJ_7beba502c36bca4d52d8120da36c38faf3944)&quot;\n    }\n}'
&gt;&gt;&gt; from idict.core.frozenidentifieddict import FrozenIdentifiedDict
&gt;&gt;&gt; d = FrozenIdentifiedDict(x=5, y=7)
&gt;&gt;&gt; print(d)
{
    &quot;x&quot;: 5,
    &quot;y&quot;: 7,
    &quot;_id&quot;: &quot;TC_15c7ce3faeb9d063ac62bef6a1b9076a15ee4&quot;,
    &quot;_ids&quot;: &quot;hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f Bk_b75c77bb5e2640ad6428eb35f82a492dd8065&quot;
}
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def all(self):
    r&#34;&#34;&#34;
    Usage:

    &gt;&gt;&gt; from idict.core.frozenidentifieddict import FrozenIdentifiedDict as idict
    &gt;&gt;&gt; from ldict.core.appearance import decolorize
    &gt;&gt;&gt; out = idict(x=134124, y= 56).all
    &gt;&gt;&gt; decolorize(out)
    &#39;{\n    &#34;x&#34;: 134124,\n    &#34;y&#34;: 56,\n    &#34;_id&#34;: &#34;tV_c3c37026dc9a795bb61f18be755b7a8a094f2&#34;,\n    &#34;_ids&#34;: {\n        &#34;x&#34;: &#34;Ad_045ef613e3a78b8b54468cccd1fe32d9f4bae (content: 3f_cbb9283e13010e09544692d7e1fe3224e4bae)&#34;,\n        &#34;y&#34;: &#34;UH_5e477903f808edcf52d8abe1a36c38b014944 (content: mJ_7beba502c36bca4d52d8120da36c38faf3944)&#34;\n    }\n}&#39;
    &gt;&gt;&gt; from idict.core.frozenidentifieddict import FrozenIdentifiedDict
    &gt;&gt;&gt; d = FrozenIdentifiedDict(x=5, y=7)
    &gt;&gt;&gt; print(d)
    {
        &#34;x&#34;: 5,
        &#34;y&#34;: 7,
        &#34;_id&#34;: &#34;TC_15c7ce3faeb9d063ac62bef6a1b9076a15ee4&#34;,
        &#34;_ids&#34;: &#34;hi_7d6b4783509390c5384ac2c1b88fbd3d3cd8f Bk_b75c77bb5e2640ad6428eb35f82a492dd8065&#34;
    }
    &#34;&#34;&#34;
    return self.__repr__(all=True)</code></pre>
</details>
</dd>
<dt id="idict.core.frozenidentifieddict.FrozenIdentifiedDict.asdict"><code class="name">var <span class="ident">asdict</span></code></dt>
<dd>
<div class="desc"><pre><code class="language-python-repl">&gt;&gt;&gt; from idict.core.frozenidentifieddict import FrozenIdentifiedDict as idict
&gt;&gt;&gt; d = idict(x=3, y=5)
&gt;&gt;&gt; d.id
'Gm_969c1762a9edc78bf5dc236c663f77f39933b'
&gt;&gt;&gt; e = idict(x=7, y=8, d=d)
&gt;&gt;&gt; e.asdict
{'x': 7, 'y': 8, 'd': {'x': 3, 'y': 5, '_id': 'Gm_969c1762a9edc78bf5dc236c663f77f39933b', '_ids': {'x': 'n4_51866e4dc164a1c5cd82c0babdafb9a65d5ab', 'y': 'ii_6ee7b815d7ae16c5384a72b1b88fbd4d3cd8f'}}, '_id': 'dc_ecfbc17842ca0e082a02528315f3aee08ff89', '_ids': {'x': 'Ak_4864e8a41a20ba9d64284c45f82a491dd8065', 'y': 'Ny_2c054fb898b960f9bf0d1fd7c59add74ecbf8', 'd': 'Tk_c466af3b9f5f550ef5dc0d51663f77a9a933b'}}
&gt;&gt;&gt; d.hosh ** key2id(&quot;d&quot;, d.identity.digits) == e.hoshes[&quot;d&quot;]
True
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def asdict(self):
    &#34;&#34;&#34;
    &gt;&gt;&gt; from idict.core.frozenidentifieddict import FrozenIdentifiedDict as idict
    &gt;&gt;&gt; d = idict(x=3, y=5)
    &gt;&gt;&gt; d.id
    &#39;Gm_969c1762a9edc78bf5dc236c663f77f39933b&#39;
    &gt;&gt;&gt; e = idict(x=7, y=8, d=d)
    &gt;&gt;&gt; e.asdict
    {&#39;x&#39;: 7, &#39;y&#39;: 8, &#39;d&#39;: {&#39;x&#39;: 3, &#39;y&#39;: 5, &#39;_id&#39;: &#39;Gm_969c1762a9edc78bf5dc236c663f77f39933b&#39;, &#39;_ids&#39;: {&#39;x&#39;: &#39;n4_51866e4dc164a1c5cd82c0babdafb9a65d5ab&#39;, &#39;y&#39;: &#39;ii_6ee7b815d7ae16c5384a72b1b88fbd4d3cd8f&#39;}}, &#39;_id&#39;: &#39;dc_ecfbc17842ca0e082a02528315f3aee08ff89&#39;, &#39;_ids&#39;: {&#39;x&#39;: &#39;Ak_4864e8a41a20ba9d64284c45f82a491dd8065&#39;, &#39;y&#39;: &#39;Ny_2c054fb898b960f9bf0d1fd7c59add74ecbf8&#39;, &#39;d&#39;: &#39;Tk_c466af3b9f5f550ef5dc0d51663f77a9a933b&#39;}}
    &gt;&gt;&gt; d.hosh ** key2id(&#34;d&#34;, d.identity.digits) == e.hoshes[&#34;d&#34;]
    True
    &#34;&#34;&#34;
    return self.frozen.asdict</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="idict.core.frozenidentifieddict.FrozenIdentifiedDict.clone"><code class="name flex">
<span>def <span class="ident">clone</span></span>(<span>self, data=None, rnd=None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def clone(self, data=None, rnd=None, _cloned=None):
    cloned_internals = _cloned or dict(blobs=self.blobs, hashes=self.hashes, hoshes=self.hoshes, hosh=self.hosh)
    return FrozenIdentifiedDict(
        data or self.data, rnd=rnd or self.rnd, identity=self.identity, _cloned=cloned_internals
    )</code></pre>
</details>
</dd>
<dt id="idict.core.frozenidentifieddict.FrozenIdentifiedDict.evaluate"><code class="name flex">
<span>def <span class="ident">evaluate</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><pre><code class="language-python-repl">&gt;&gt;&gt; from idict.core.frozenidentifieddict import FrozenIdentifiedDict as idict
&gt;&gt;&gt; f = lambda x: {&quot;y&quot;: x+2}
&gt;&gt;&gt; d = idict(x=3)
&gt;&gt;&gt; a = d &gt;&gt; f
&gt;&gt;&gt; a.show(colored=False)
{
    &quot;y&quot;: &quot;â†’(x)&quot;,
    &quot;x&quot;: 3,
    &quot;_id&quot;: &quot;NfDlK1.4MFGwvI9SXFRBUlgdD0.xW4AU0sYuSnwe&quot;,
    &quot;_ids&quot;: {
        &quot;y&quot;: &quot;r6qgPdf1kPTU.K8bw-R-e0PzHWZxW4AU0sYuSnwe&quot;,
        &quot;x&quot;: &quot;n4_51866e4dc164a1c5cd82c0babdafb9a65d5ab (content: S5_331b7e710abd1443cd82d6b5cdafb9f04d5ab)&quot;
    }
}
&gt;&gt;&gt; a.evaluate()
&gt;&gt;&gt; a.show(colored=False)
{
    &quot;y&quot;: 5,
    &quot;x&quot;: 3,
    &quot;_id&quot;: &quot;NfDlK1.4MFGwvI9SXFRBUlgdD0.xW4AU0sYuSnwe&quot;,
    &quot;_ids&quot;: {
        &quot;y&quot;: &quot;r6qgPdf1kPTU.K8bw-R-e0PzHWZxW4AU0sYuSnwe&quot;,
        &quot;x&quot;: &quot;n4_51866e4dc164a1c5cd82c0babdafb9a65d5ab (content: S5_331b7e710abd1443cd82d6b5cdafb9f04d5ab)&quot;
    }
}
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def evaluate(self):
    &#34;&#34;&#34;
    &gt;&gt;&gt; from idict.core.frozenidentifieddict import FrozenIdentifiedDict as idict
    &gt;&gt;&gt; f = lambda x: {&#34;y&#34;: x+2}
    &gt;&gt;&gt; d = idict(x=3)
    &gt;&gt;&gt; a = d &gt;&gt; f
    &gt;&gt;&gt; a.show(colored=False)
    {
        &#34;y&#34;: &#34;â†’(x)&#34;,
        &#34;x&#34;: 3,
        &#34;_id&#34;: &#34;NfDlK1.4MFGwvI9SXFRBUlgdD0.xW4AU0sYuSnwe&#34;,
        &#34;_ids&#34;: {
            &#34;y&#34;: &#34;r6qgPdf1kPTU.K8bw-R-e0PzHWZxW4AU0sYuSnwe&#34;,
            &#34;x&#34;: &#34;n4_51866e4dc164a1c5cd82c0babdafb9a65d5ab (content: S5_331b7e710abd1443cd82d6b5cdafb9f04d5ab)&#34;
        }
    }
    &gt;&gt;&gt; a.evaluate()
    &gt;&gt;&gt; a.show(colored=False)
    {
        &#34;y&#34;: 5,
        &#34;x&#34;: 3,
        &#34;_id&#34;: &#34;NfDlK1.4MFGwvI9SXFRBUlgdD0.xW4AU0sYuSnwe&#34;,
        &#34;_ids&#34;: {
            &#34;y&#34;: &#34;r6qgPdf1kPTU.K8bw-R-e0PzHWZxW4AU0sYuSnwe&#34;,
            &#34;x&#34;: &#34;n4_51866e4dc164a1c5cd82c0babdafb9a65d5ab (content: S5_331b7e710abd1443cd82d6b5cdafb9f04d5ab)&#34;
        }
    }
    &#34;&#34;&#34;
    self.frozen.evaluate()</code></pre>
</details>
</dd>
<dt id="idict.core.frozenidentifieddict.FrozenIdentifiedDict.show"><code class="name flex">
<span>def <span class="ident">show</span></span>(<span>self, colored=True, width=None)</span>
</code></dt>
<dd>
<div class="desc"><pre><code class="language-python-repl">&gt;&gt;&gt; idict = FrozenIdentifiedDict
&gt;&gt;&gt; idict(x=134124, y= 56).show(colored=False)
{
    &quot;x&quot;: 134124,
    &quot;y&quot;: 56,
    &quot;_id&quot;: &quot;tV_c3c37026dc9a795bb61f18be755b7a8a094f2&quot;,
    &quot;_ids&quot;: {
        &quot;x&quot;: &quot;Ad_045ef613e3a78b8b54468cccd1fe32d9f4bae (content: 3f_cbb9283e13010e09544692d7e1fe3224e4bae)&quot;,
        &quot;y&quot;: &quot;UH_5e477903f808edcf52d8abe1a36c38b014944 (content: mJ_7beba502c36bca4d52d8120da36c38faf3944)&quot;
    }
}
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def show(self, colored=True, width=None):
    r&#34;&#34;&#34;
    &gt;&gt;&gt; idict = FrozenIdentifiedDict
    &gt;&gt;&gt; idict(x=134124, y= 56).show(colored=False)
    {
        &#34;x&#34;: 134124,
        &#34;y&#34;: 56,
        &#34;_id&#34;: &#34;tV_c3c37026dc9a795bb61f18be755b7a8a094f2&#34;,
        &#34;_ids&#34;: {
            &#34;x&#34;: &#34;Ad_045ef613e3a78b8b54468cccd1fe32d9f4bae (content: 3f_cbb9283e13010e09544692d7e1fe3224e4bae)&#34;,
            &#34;y&#34;: &#34;UH_5e477903f808edcf52d8abe1a36c38b014944 (content: mJ_7beba502c36bca4d52d8120da36c38faf3944)&#34;
        }
    }
    &#34;&#34;&#34;
    CustomJSONEncoder.width = width
    return print(self.all if colored else decolorize(self.all))</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="idict.core" href="index.html">idict.core</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="idict.core.frozenidentifieddict.FrozenIdentifiedDict" href="#idict.core.frozenidentifieddict.FrozenIdentifiedDict">FrozenIdentifiedDict</a></code></h4>
<ul class="two-column">
<li><code><a title="idict.core.frozenidentifieddict.FrozenIdentifiedDict.all" href="#idict.core.frozenidentifieddict.FrozenIdentifiedDict.all">all</a></code></li>
<li><code><a title="idict.core.frozenidentifieddict.FrozenIdentifiedDict.asdict" href="#idict.core.frozenidentifieddict.FrozenIdentifiedDict.asdict">asdict</a></code></li>
<li><code><a title="idict.core.frozenidentifieddict.FrozenIdentifiedDict.clone" href="#idict.core.frozenidentifieddict.FrozenIdentifiedDict.clone">clone</a></code></li>
<li><code><a title="idict.core.frozenidentifieddict.FrozenIdentifiedDict.evaluate" href="#idict.core.frozenidentifieddict.FrozenIdentifiedDict.evaluate">evaluate</a></code></li>
<li><code><a title="idict.core.frozenidentifieddict.FrozenIdentifiedDict.hosh" href="#idict.core.frozenidentifieddict.FrozenIdentifiedDict.hosh">hosh</a></code></li>
<li><code><a title="idict.core.frozenidentifieddict.FrozenIdentifiedDict.show" href="#idict.core.frozenidentifieddict.FrozenIdentifiedDict.show">show</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>